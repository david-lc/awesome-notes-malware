from cmath import log
from crypt import methods
from datetime import datetime
import re
from flask import Flask, redirect, url_for, request

app = Flask(__name__)

@app.route("/")
def root():
    return redirect(url_for('alive'))

@app.route("/alive", methods=["GET"])
def is_alive():
    return { "message": "I'm alive" }, 200

#@app.route("/download", methods=["GET"])
#def download_release():
    

@app.route("/send", methods=["POST"])
def send_data():
    msg = request.form["test"]
    sender = request.remote_addr

    log_msg = "{}[{}]: -> {}\n".format(datetime.now().strftime("%d/%m/%Y %H:%M:%S"), sender, msg)

    print(log_msg)
    with open("log.txt", "a") as f:
        f.write(log_msg)

    return "<p>example</p>", 200
